<!doctype html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="/rastreamento.css" />
    <title>CPTM+ | Rastreamento</title>
</head>
<body th:attr="data-logado=${logado ? 'true' : 'false'}">
<div class="main-container">
    <header class="header">
        <div class="logo">
            <img class="logo-img" src="/images/cptm.png" alt="Logo CPTM+" />
        </div>
        <button th:onclick="${logado} ? 'location.href=\'/cptm+/usuario\'' : 'location.href=\'/cptm+/login\''"
                class="user-button" aria-label="Usu√°rio">
            <img src="/images/user.png" alt="user" />
        </button>
    </header>

    <div class="content">
        <div class="rastreamento-container">
            <div class="rastreamento-header">Rastreamento de Trens</div>

            <!-- Bot√µes de linha com IDs reais -->
            <div th:each="linha : ${linhas}">
                <button class="linha-btn"
                        th:classappend="${linha.nome.toLowerCase()}"
                        th:attr="data-linha=${linha.nome.toLowerCase()},
                     data-nome=${linha.nome},
                     data-id=${linha.id}"
                        onclick="manusearClique(this)">
                    <span class="ponto"></span>
                    <span th:switch="${linha.nome}">
                        <span th:case="'Rubi'" th:text="'Linha 7 - ' + ${linha.nome}">Linha 7 - Rubi</span>
                        <span th:case="'Turquesa'" th:text="'Linha 10 - ' + ${linha.nome}">Linha 10 - Turquesa</span>
                        <span th:case="'Coral'" th:text="'Linha 11 - ' + ${linha.nome}">Linha 11 - Coral</span>
                        <span th:case="'Safira'" th:text="'Linha 12 - ' + ${linha.nome}">Linha 12 - Safira</span>
                        <span th:case="'Jade'" th:text="'Linha 13 - ' + ${linha.nome}">Linha 13 - Jade</span>
                        <span th:case="*" th:text="'Linha - ' + ${linha.nome}">Linha - ?</span>
                    </span>
                </button>
            </div>


            <div class="linha-selecionada-label">
                Linha selecionada: <span class="texto-cor" id="linhaSelecionadaTexto">Nenhuma linha selecionada</span>
            </div>

            <!-- Dropdown de Esta√ß√µes -->
            <select id="estacoesSelect">
                <option value="">Selecione uma linha primeiro</option>
            </select>

            <div class="estacao-selecionada-label">
                Esta√ß√£o selecionada: <span class="texto-cor" id="estacaoSelecionadaTexto">Nenhuma esta√ß√£o selecionada</span>
            </div>

            <!-- Dropdown de Sentido -->
            <select id="sentidoSelect">
                <option value="">Selecionar sentido</option>
            </select>

            <div class="sentido-selecionado-label">
                Sentido selecionado: <span class="texto-cor" id="sentidoSelecionadoTexto">Nenhum sentido selecionado</span>
            </div>

            <div class="train-box" id="trainBox">
                <div class="train-icon">üöä</div>
                <div class="train-info" id="trainInfo">
                    Pr√≥ximo trem: Chegando em <span id="tempoChegada" style="font-weight: bold;">3 min</span>
                </div>
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <button onclick="location.href='/cptm+/home'" class="icon-button"><img src="/images/homeIcon.png" alt="Home" class="icon" /></button>
        <button onclick="location.href='/cptm+/estacoes'" class="icon-button"><img src="/images/location-pin.png" alt="Localiza√ß√£o" class="icon" /></button>
        <button onclick="location.href='/cptm+/rastreamento'" class="icon-button"><img src="/images/trem.png" alt="Trem" class="icon" /></button>
        <button onclick="location.href='/cptm+/ajuda'" class="icon-button"><img src="/images/siren.png" alt="Notifica√ß√µes" class="icon" /></button>
    </div>
</div>
<script src="/rastreamento.js"></script>
</body>
</html>
